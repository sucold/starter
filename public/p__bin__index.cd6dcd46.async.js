"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[607],{27359:function(Le,q,t){t.r(q),t.d(q,{default:function(){return ge}});var se=t(18342),_=t.n(se),ve=t(6284),ee=t.n(ve),d=t(48438),ce=t(32808),ae=t(84485),he=t(71230),p=t(15746),w=t(71577),pe=t(11382),F=t(29924),V=t(26713),I=t(27049),f=t(28899),L=t(67294),E=t(39752),le=t(11475),xe=t(30381),me=t.n(xe),Fe=t(2538),e=t(85893),te=function(s){var b=s.url,k=s.children,B=s.record,C=s.ref2,Z=s.title,v=s.trigger,j=s.where,l=s.create,R=s.onFinish,y=s.initialValues,n;typeof v=="string"?n=(0,e.jsx)(w.Z,{size:"small",type:"primary",children:v}):n=v;var g=Fe.m.location.pathname,$="/api/".concat(g,"/create").replaceAll("//","/");return l||($="/api/".concat(g,"/update").replaceAll("//","/")),(0,e.jsx)(d.Yr8,{trigger:n,title:Z,width:800,onFinish:R||(0,f.Ps)(C,b||$,j||{}),initialValues:y?y(B):B,modalProps:{destroyOnClose:!0},children:k})},ye=ce.Z.Group,o=ae.Z.Text,re=ae.Z.Paragraph,je=function(){var s,b,k,B,C,Z,v=(0,E.useParams)(),j=E.history.location.pathname.startsWith("/admin/transform/preview"),l=(0,E.useRequest)("/api/admin/transform/preview/"+(v==null?void 0:v.id)+"/fetch?page=1&size=10&id="+(v==null?void 0:v.id),{manual:!j}),R=E.history.location.pathname==="/overview",y=E.history.location.pathname==="/bin",n=(0,E.useRequest)({url:"/api/bin/where"+(y?"":"?import=1"),method:"get"}),g=(0,L.useRef)(),$=function(r){var a,u,i,x,m,h;return(0,e.jsxs)(he.Z,{gutter:[16,0],children:[(0,e.jsx)(p.Z,{span:8,children:(0,e.jsx)(d.VaQ,{name:"code",label:"Code",disabled:r.record!==void 0,placeholder:"\u8BF7\u8F93\u5165Code",rules:[{required:!0,message:"\u8BF7\u8F93\u5165Code"}]})}),(0,e.jsx)(p.Z,{span:16,children:(0,e.jsx)(d.VaQ,{name:"remark",label:"\u5907\u6CE8\u8BF4\u660E",placeholder:"\u8BF7\u8F93\u5165\u5907\u6CE8\u8BF4\u660E"})}),(0,e.jsx)(p.Z,{span:8,children:(0,e.jsx)(d._IT,{name:"vendor",showSearch:!0,label:"Vendor",placeholder:"\u8BF7\u8F93\u5165\u9009\u62E9Vendor",valueEnum:(a=n.data)===null||a===void 0?void 0:a.Vendor})}),(0,e.jsx)(p.Z,{span:8,children:(0,e.jsx)(d._IT,{name:"country2",label:"\u56FD\u5BB6",showSearch:!0,placeholder:"\u8BF7\u8F93\u5165\u9009\u62E9\u56FD\u5BB6",valueEnum:(u=n.data)===null||u===void 0?void 0:u.County})}),(0,e.jsx)(p.Z,{span:8,children:(0,e.jsx)(d._IT,{name:"level",label:"Level",placeholder:"\u8BF7\u8F93\u5165\u9009\u62E9Level",showSearch:!0,valueEnum:(i=n.data)===null||i===void 0?void 0:i.Level})}),(0,e.jsx)(p.Z,{span:8,children:(0,e.jsx)(d._IT,{name:"rank",label:"Rank",placeholder:"\u8BF7\u8F93\u5165\u9009\u62E9Rank",showSearch:!0,valueEnum:(x=n.data)===null||x===void 0?void 0:x.Rank})}),(0,e.jsx)(p.Z,{span:8,children:(0,e.jsx)(d._IT,{name:"bank",label:"Bank",placeholder:"\u8BF7\u8F93\u5165\u9009\u62E9Bank",showSearch:!0,valueEnum:(m=n.data)===null||m===void 0?void 0:m.Bank})}),(0,e.jsx)(p.Z,{span:8,children:(0,e.jsx)(d._IT,{name:"pass_vbv",label:"PassVbv",placeholder:"\u8BF7\u8F93\u5165\u9009\u62E9PassVbv",showSearch:!0,valueEnum:(h=n.data)===null||h===void 0?void 0:h.Pass,rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u9009\u62E9PassVbv"}]})}),(0,e.jsx)(p.Z,{span:8,children:(0,e.jsx)(d.VaQ,{name:"website",label:"\u7F51\u7AD9",placeholder:"\u8BF7\u8F93\u5165\u7F51\u7AD9\u5730\u5740"})}),(0,e.jsx)(p.Z,{span:8,children:(0,e.jsx)(d.VaQ,{name:"phone",label:"\u94F6\u884C\u7535\u8BDD",placeholder:"\u8BF7\u8F93\u5165\u94F6\u884C\u7535\u8BDD"})}),(0,e.jsx)(p.Z,{span:8,children:(0,e.jsx)(d.VaQ,{name:"user",label:"\u6765\u81EA\u7528\u6237",placeholder:"\u8BF7\u8F93\u5165\u6765\u81EA\u7528\u6237"})})]})},we=(0,e.jsx)(te,{trigger:(0,e.jsx)(w.Z,{type:"primary",children:"\u6DFB\u52A0"}),ref2:g,title:"\u6DFB\u52A0BIN",create:!0,url:"/api/admin/bin/create",children:(0,e.jsx)($,{})},"create_node"),ne="transform_export",N="download_groups",fe=function(r){var a=r.record;return(0,e.jsx)(te,{ref2:g,trigger:(0,e.jsx)(w.Z,{size:"small",type:"primary",children:"\u7F16\u8F91"}),title:"\u7F16\u8F91BIN "+(a==null?void 0:a.code),record:a,url:"/api/admin/bin/update",where:{id:a==null?void 0:a.id},children:(0,e.jsx)($,{record:a})})},be=function(){var r,a,u,i,x,m,h,S,A,T,P,z,Q,Y,O,G,J,M,W,H,U,K,X,Ze=(0,L.useState)(localStorage.getItem(N)),de=ee()(Ze,2),$e=de[0],Se=de[1],ue=localStorage.getItem("transform_export"),Ae=(0,L.useState)(ue===null?["country","country_cn","country2","vendor","rank","level","bank","remark"]:JSON.parse(ue)),ie=ee()(Ae,2),Te=ie[0],Pe=ie[1],De=[{label:"Bin",value:"code"},{label:"\u56FD\u5BB6",value:"country"},{label:"\u4E2D\u6587\u56FD\u5BB6",value:"country_cn"},{label:"\u56FD\u5BB6\u7B80\u79F0",value:"country2"},{label:"\u7EC4\u7EC7(Vendor)",value:"vendor"},{label:"\u7C7B\u578B(Rank)",value:"rank"},{label:"\u7EA7\u522B(Level)",value:"level"},{label:"\u94F6\u884C(Bank)",value:"bank"},{label:"\u5907\u6CE8(Remark)",value:"remark"},{label:"\u5305\u542B\u672A\u67E5\u5230\u6570\u636E",value:"dont"}],Ve=function(D){Pe(D),localStorage.setItem(ne,JSON.stringify(D))};if(l.loading)return(0,e.jsx)(pe.Z,{});var oe=((r=l.data)===null||r===void 0?void 0:r.success)-((a=l.data)===null||a===void 0?void 0:a.credit)-((u=l.data)===null||u===void 0?void 0:u.debit)-((i=l.data)===null||i===void 0?void 0:i.charge_card);return(0,e.jsxs)(d.QWM,{style:{marginBottom:20},children:["\u5BFC\u51FA\u9009\u9879\uFF1A ",(0,e.jsx)(ye,{options:De,value:Te,onChange:Ve}),(0,e.jsx)("br",{}),(0,e.jsx)("br",{}),"\u5206\u7EC4\u9009\u9879\uFF1A"," ",(0,e.jsxs)(F.ZP.Group,{onChange:function(D){Se(D.target.value),localStorage.setItem(N,D.target.value)},value:$e,children:[(0,e.jsx)(F.ZP,{value:"",children:"\u65E0"}),(0,e.jsx)(F.ZP,{value:"country_cn",children:"\u4E2D\u6587\u56FD\u5BB6\u540D\u79F0"}),(0,e.jsx)(F.ZP,{value:"country",children:"\u82F1\u6587\u56FD\u5BB6\u540D\u79F0"}),(0,e.jsx)(F.ZP,{value:"country2",children:"\u56FD\u5BB6\u7B80\u5199"}),(0,e.jsx)(F.ZP,{value:"rank",children:"\u7C7B\u578B\uFF08CDP\uFF09"}),(0,e.jsx)(F.ZP,{value:"code",children:"BIN\u5206\u7C7B"}),(0,e.jsx)(F.ZP,{value:"code1",children:"3/4/5/6"}),(0,e.jsx)(F.ZP,{value:"source",children:"\u6E90\u6587\u4EF6\u4E0B\u8F7D"})]}),(0,e.jsx)("br",{}),(0,e.jsx)("br",{}),(0,e.jsx)(V.Z,{children:(0,e.jsxs)(re,{children:[(0,e.jsxs)(o,{children:["\u67E5\u8BE2\u6570\u636E\uFF1A",(0,e.jsxs)(o,{style:{color:"blue"},children:[(x=l.data)===null||x===void 0?void 0:x.all,"\u6761"]})]}),(0,e.jsx)(I.Z,{type:"vertical"}),(0,e.jsxs)(o,{children:["\u53EF\u67E5\u6570\u636E\uFF1A",(0,e.jsxs)(o,{style:{color:"blue"},children:[(((m=l.data)===null||m===void 0?void 0:m.success)/((h=l.data)===null||h===void 0?void 0:h.all)*100).toFixed(2),"%\uFF08",(S=l.data)===null||S===void 0?void 0:S.success,"\u6761\uFF09"]})]}),(0,e.jsx)(I.Z,{type:"vertical"}),(0,e.jsxs)(o,{children:["\u4E0D\u53EF\u67E5\u6570\u636E\uFF1A",(0,e.jsxs)(o,{style:{color:"blue"},children:[((((A=l.data)===null||A===void 0?void 0:A.all)-((T=l.data)===null||T===void 0?void 0:T.success))/((P=l.data)===null||P===void 0?void 0:P.all)*100).toFixed(2),"%\uFF08",((z=l.data)===null||z===void 0?void 0:z.all)-((Q=l.data)===null||Q===void 0?void 0:Q.success),"\u6761\uFF09"]})]})]})}),(0,e.jsx)("br",{}),(0,e.jsx)(V.Z,{children:(0,e.jsxs)(re,{children:[(0,e.jsxs)(o,{children:["\u4FE1\u7528\u5361\uFF1A",(0,e.jsxs)(o,{style:{color:"blue"},children:[(((Y=l.data)===null||Y===void 0?void 0:Y.credit)/((O=l.data)===null||O===void 0?void 0:O.success)*100).toFixed(2),"%\uFF08",(G=l.data)===null||G===void 0?void 0:G.credit,"\u6761\uFF09"]})]}),(0,e.jsx)(I.Z,{type:"vertical"}),(0,e.jsxs)(o,{children:["\u501F\u8BB0\u5361\uFF1A",(0,e.jsxs)(o,{style:{color:"blue"},children:[(((J=l.data)===null||J===void 0?void 0:J.debit)/((M=l.data)===null||M===void 0?void 0:M.success)*100).toFixed(2),"%\uFF08",(W=l.data)===null||W===void 0?void 0:W.debit,"\u6761\uFF09"]})]}),(0,e.jsx)(I.Z,{type:"vertical"}),(0,e.jsxs)(o,{children:["\u9884\u4ED8\u5361\uFF1A",(0,e.jsxs)(o,{style:{color:"blue"},children:[(((H=l.data)===null||H===void 0?void 0:H.charge_card)/((U=l.data)===null||U===void 0?void 0:U.success)*100).toFixed(2),"%\uFF08",(K=l.data)===null||K===void 0?void 0:K.charge_card,"\u6761\uFF09"]})]}),(0,e.jsx)(I.Z,{type:"vertical"}),(0,e.jsxs)(o,{children:["\u5176\u4ED6\uFF1A",(0,e.jsxs)(o,{style:{color:"blue"},children:[(oe/((X=l.data)===null||X===void 0?void 0:X.success)*100).toFixed(2),"%\uFF08",oe,"\u6761\uFF09"]})]})]})})]})};function Be(){if(y)return"BIN\u7BA1\u7406";if(j){var c,r;return"\u8F6C\u6362\u67E5\u8BE2\u7ED3\u679C #".concat((c=l.data)===null||c===void 0||(r=c.transform)===null||r===void 0?void 0:r.id)}return R?"\u67E5\u8BE2\u7ED3\u679C":"BIN\u9884\u89C8"}var Ie=E.history.location.pathname,ke="/api/".concat(Ie,"/fetch").replaceAll("//","/"),Ce=(0,f.Of)();return(0,e.jsxs)(d._zJ,{title:!1,loading:n.loading,children:[j&&(0,e.jsx)(be,{}),(0,e.jsx)(d.QVr,_()(_()({actionRef:g,columns:[{title:"BIN",dataIndex:"code",key:"code",sorter:!0,align:"center",valueType:"digit",render:function(r,a){return a==null?void 0:a.code}},{title:"Card",dataIndex:"card",key:"card",sorter:!0,align:"center",hideInSearch:!0,hideInTable:!j},{title:"Vendor",dataIndex:"vendor",key:"vendor",align:"center",valueType:"select",valueEnum:(s=n.data)===null||s===void 0?void 0:s.Vendor,fieldProps:{showArrow:!0,mode:"multiple",placeholder:"\u8BF7\u9009\u62E9Vendor"},colSize:2,render:function(r,a){return(0,e.jsxs)(V.Z,{children:[(a==null?void 0:a.bank_logo)&&(0,e.jsx)("img",{alt:a==null?void 0:a.bank_logo,height:20,src:a==null?void 0:a.bank_logo}),!(a!=null&&a.bank_logo)&&r]})}},{title:"Country",dataIndex:"country",key:"country",align:"center",valueType:"select",fieldProps:{showArrow:!0,mode:"multiple",placeholder:"\u8BF7\u9009\u62E9\u56FD\u5BB6"},valueEnum:(b=n.data)===null||b===void 0?void 0:b.County},{title:"\u56FD\u5BB6",dataIndex:"country_cn",key:"country_cn",align:"center",hideInSearch:!0},{title:"\u7B80\u79F0",dataIndex:"country2",key:"country2",align:"center",hideInSearch:!0},{title:"Emoji",dataIndex:"emoji",key:"emoji",align:"center",hideInSearch:!0},{title:"\u56FD\u65D7",dataIndex:"svg",key:"svg",align:"center",render:function(r,a){var u,i;return(0,e.jsx)("img",{alt:a==null||(u=a.country2)===null||u===void 0?void 0:u.toLowerCase(),height:20,src:"/api/country/".concat(a==null||(i=a.country2)===null||i===void 0?void 0:i.toLowerCase(),".svg")})},hideInSearch:!0},{title:"Level",dataIndex:"level",key:"level",align:"center",valueType:"select",fieldProps:{showArrow:!0,mode:"multiple",placeholder:"\u8BF7\u9009\u62E9\u7B49\u7EA7"},valueEnum:(k=n.data)===null||k===void 0?void 0:k.Level},{title:"Rank",dataIndex:"rank",key:"rank",align:"center",valueType:"select",fieldProps:{showArrow:!0,mode:"multiple",placeholder:"\u8BF7\u9009\u62E9Rank"},valueEnum:(B=n.data)===null||B===void 0?void 0:B.Rank},{title:"Bank",dataIndex:"bank",key:"bank",align:"center",valueType:"select",fieldProps:{showArrow:!0,mode:"multiple",placeholder:"\u8BF7\u9009\u62E9\u94F6\u884C"},valueEnum:(C=n.data)===null||C===void 0?void 0:C.Bank},{title:"PassVbv",dataIndex:"pass_vbv",key:"pass_vbv",align:"center",valueType:"select",fieldProps:{showArrow:!0,mode:"multiple",placeholder:"\u8BF7\u9009\u62E9PassVbv"},valueEnum:(Z=n.data)===null||Z===void 0?void 0:Z.Pass},{title:"Remark",dataIndex:"remark",key:"remark",align:"center",hideInSearch:!0},{title:"\u7F51\u7AD9",dataIndex:"website",key:"website",align:"center",hideInSearch:!0},{title:"\u624B\u673A\u53F7",dataIndex:"phone",key:"phone",align:"center",hideInSearch:!0},{hideInTable:!y,title:"\u6765\u81EA\u7528\u6237",dataIndex:"user",key:"user",align:"center",hideInSearch:!0},{hideInTable:!y,title:"\u66F4\u65B0\u65F6\u95F4",dataIndex:"updated_at",key:"updated_at",align:"center",hideInSearch:!0,render:function(r,a){return me()((a==null?void 0:a.updated_at)*1e3).format("YYYY-MM-DD HH:mm:ss")}},{title:"\u64CD\u4F5C",dataIndex:"edit",key:"edit",align:"center",width:80,hideInTable:!y,hideInSearch:!0,render:function(r,a){return(0,e.jsx)(V.Z,{children:(0,e.jsx)(fe,{record:a})})}}],headerTitle:Be(),toolBarRender:function(){return y?[we,(0,e.jsx)(w.Z,{type:"dashed",onClick:(0,f.Yh)(g,"/api/admin/bin/generator",{},{title:"\u8BF7\u95EE\u60A8\u786E\u5B9A\u8981\u751F\u6210\u53C2\u6570\u5417\uFF1F",icon:(0,e.jsx)(le.Z,{}),okType:"primary",content:"\u662F\u5426\u786E\u8BA4\u751F\u6210\uFF1F",okText:"\u786E\u8BA4",cancelText:"\u53D6\u6D88"}),children:"\u751F\u6210\u53C2\u6570"},"generator"),(0,e.jsx)(w.Z,{type:"primary",danger:!0,onClick:(0,f.Yh)(g,"/api/admin/bin/reset",{},{title:"\u8BF7\u95EE\u60A8\u786E\u5B9A\u8981\u6E05\u7A7A\u5417\uFF1F",icon:(0,e.jsx)(le.Z,{}),okType:"primary",content:"\u5BFC\u5165\u64CD\u4F5C\u4E0D\u53EF\u9006\u8F6C",okText:"\u786E\u8BA4",cancelText:"\u53D6\u6D88"}),children:"\u6E05\u7A7A"},"reset_all")]:j?[(0,e.jsx)(w.Z,{type:"primary",onClick:function(){var a,u,i,x,m,h=localStorage.getItem(N),S=h?"\u6309".concat(h):"\u4E0D\u5206\u7EC4",A=l==null||(a=l.data)===null||a===void 0||(u=a.transform)===null||u===void 0?void 0:u.name.toString().replaceAll(".txt",""),T="/api/admin/transform/download?id=".concat(v==null?void 0:v.id,"&options=").concat(localStorage.getItem(ne),"&group=").concat(h),P="".concat(S," ").concat(A," ").concat(l==null||(i=l.data)===null||i===void 0?void 0:i.success,"\u6761 ").concat((new Date().getTime()/1e3).toFixed(),".zip");(0,f.UW)(T,h==="source"?"\u6E90\u6587\u4EF6-"+(l==null||(x=l.data)===null||x===void 0||(m=x.transform)===null||m===void 0?void 0:m.name):P)},children:"\u5BFC\u51FA\u7ED3\u679C"},"export_dropdown")]:[]}},Ce),{},{request:(0,f.kR)(ke,v),search:{defaultCollapsed:!1},size:"middle",scroll:{x:1600}}))]})},ge=je}}]);
